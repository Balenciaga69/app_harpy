## Affix

- 將所有詞綴（無論是敵人、裝備或技能來源）歸結為一套核心介面 `IAffixTemplate`。
- 它扮演著連接裝備、異常狀態、戰鬥事件與角色屬性的核心機制。
- 核心邏輯包括：傷害計算、屬性聚合、事件監聽註冊等。
- 這些邏輯只需要一套處理服務。
- 所有的 Affixes 最終都會在戰鬥的 Tick 處理流程中聚合、觸發。
- 由於它們都來自同一個介面，如果日誌系統設計不佳，很難快速分辨是「敵人模板的詞綴」還是「玩家裝備的詞綴」觸發了效果。
- 詞綴模板本身不應該關心它能被誰擁有。
- 不應該關心誰能裝備，或者擁有者能堆疊多少個。
- 它的職責是定義行為與基礎數值。
- Affix 藍圖：保持純粹，專注於效果定義，不關心其出現的地理位置和時間。
- 這個 Affix 是 boss 特有或某裝備特有這件事情，不是 boss 或裝備該關心的。
- 也不是 affix 本身該關心的，而是生成系統與池系統該關心的。
- 生成服務（Item/Enemy）只負責讀取 Context 和分佈表，並執行生成行為。
- 這個詞綴只會出現第一章節的武器上，或第三章以上某一敵人成為 Boss 時，這件事情與 affix 藍圖無關。

## 誰關心 Affix

- 終極寶石 (Ultimate Gem) 是由詞綴組合。
- 物品、裝備、遺物是詞綴的主要載體。
- 詞綴可以指定執行行為。
- 在無盡模式下，敵人會加入僅此階段出現的特殊 Affixes。
- 詞綴生成系統：從詞綴池表中，根據 Weight 抽出並 Roll 數值。
- 然後將詞綴塞到 Item Instance。
- 沒有 Affixes 就做不出任何物品、裝備、遺物。
- 也做不出敵人、終極技能、賽前變數等等。
- 角色與敵人都是 Unit 類型。
- 角色的成長是透過裝備/遺物/模板上的詞綴聚合而成。
- 敵人數值也是如此。
- 賽前變數的效果會以狀態實例或屬性修飾符的形式注入。
- 這本質上是動態賦予了類似詞綴的短暫效果。
