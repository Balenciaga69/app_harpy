## Item

### 系統概述

- 物品系統分類繁多，主題可拆分多套（暫定八套以上）
- 物品內容：
  - 掉落池、原型（Template）、實例（Instance）、生成流程
- 詞綴內容：
  - 掉落池、模板（AffixTemplate）、實例（AffixInstance）、生成流程

### 物品原型（Item Template）

- 定義靜態數據與行為規則：
  - 名稱、類型、稀有度、裝備槽位、可否堆疊、可能詞綴、獨特效果
- 設定檔（JSON）定義所有靜態屬性與詞綴列表

### 物品實例（Item Instance）

- 真正放在倉庫/裝備身上的物品
- 會序列化存入存檔，返序列化還原

### 物品生成系統

- 實例化系統：解析數據定義，分離靜態與動態邏輯
- 詞綴生成系統：隨機生成詞綴，定義模板（AffixTemplate）與詞綴池
- 生成流程：
  1. 藍圖載入與實例創建
  2. 數值隨機生成
  3. 處理特殊行為模組（詞綴影響戰鬥事件，不直接改屬性數值）

### 物品行為與屬性聚合

- 戰鬥或裝備時：
  - 事件監聽、屬性聚合系統同時運作
  - 監聽器觸發特殊效果
  - 屬性聚合系統提取詞綴實例 (AffixInstance)，解析為 StatModifier，轉為戰鬥/面板數值

### 物品的兩種身分

- 倉庫/商店內：資料容器（被動）
- 戰鬥中：詞綴擁有者，詞綴功能實際運用

### 物品 meta data

- 除數值效果外，所有影響行為、視覺、規則的靜態資訊：
  - 名稱、外觀、可否堆疊、可否賣掉、詞綴池、詞綴數量

### 資料快取與同步

- 若用 Redis，避免頻繁查詢慢速資料庫：
  - 玩家完整角色數據包存於快取
  - 裝備變化時，先更新記憶體，再同步快取，最後寫入資料庫

## relic & equipment

- 裝備和遺物在系統底層都被視為一種 物品
- 裝備有穿戴限制，每個 Slot 都只能一種
- 遺物可以無限堆疊。
- 遺物設計偏向疊屬性或疊機制(類似 Risk of rain 2 的 item)
- 裝備則能改變玩法或補足屬性
- 二者皆有詞綴，但遺物跟傳說裝備一樣池子必定拉出固定 Affixes
