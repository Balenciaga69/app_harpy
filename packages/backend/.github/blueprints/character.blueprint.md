# Character (角色)

## 語意級

### 角色的本質

- 本質:
  - Character 本質上是 Unit 類型 (戰鬥時)
- 靜態資料:
  - 由一組靜態資料構成, 在 RUN 開始時選擇, 之後不可更改
- 擁有內容:
  - 屬性
  - 職業
  - 裝備
  - 遺物
  - 絕招 (即上述四種東西的擁有者)
- 聚合方式:
  - 模板 + Context 資料聚合
- 行為邏輯:
  - 角色本身不包含「行為邏輯」, 而是透過屬性聚合系統和事件監聽器來運作
- 角色職責:
  - 作為一個資料聚合點和戰鬥作用對象

## 架構級

### 角色模組不負責的部分

- 角色面板:
  - 前端會向後端請求完整的 Run Context
  - 面板會顯示角色所有計算後的屬性, 已裝備的裝備, 遺物, 和終極技能
  - 角色面板本身是前端的功能, 但資料來源於後端屬性聚合系統的計算結果
- 金錢管理:
  - 角色跟金錢無關
  - 金幣管理是一個獨立的系統, 角色實例只管戰鬥與裝備相關的資料, 這樣能實現更清晰的系統解耦

## 代碼級

### 角色與敵人的關係

- 共通性:
  - 都是 Unit
- 角色聚合來源:
  - 角色模板
  - 職業
  - 裝備
  - 遺物
  - 大招
  - 當前狀態
- 敵人資料來源:
  - 敵人模板 (原型)
  - 關卡生成參數
- 成長方式:
  - 角色透過獲得裝備, 遺物, 資源來帶來成長
  - 敵人數值成長由難度係數與模板配置
- 狀態生命週期:
  - 各自的異常狀態在戰鬥中動態生成, 戰鬥結束後即被清除
