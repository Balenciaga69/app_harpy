# Item,Equipment,Relic

## What is an Item, Equipment, or Relic?

- 物品
  - 物品是裝備與遺物的基底。
  - 物品是有稀有度的
  - 物品沒有等級概念, 但在生成時會受到難度係數影響而有變化
  - 物品的設計是固定模板
- 裝備
  - 裝備是可以穿戴在角色身上的物品。
  - 裝備插槽分為武器, 上衣, 褲子, 技能寶石
  - 裝備通常是直接提升角色屬性的強力物品
- 遺物
  - 遺物則是可堆疊但不可穿戴的物品。
  - 遺物通常是提供額外效果或能力的物品
  - 遺物設計通常往可疊加的小功能發展或單一強力效果
- 技能寶石
  - 技能寶石是特殊的存在, 是唯一能提供大絕招的來源

## 如何獲取物品?

- 來自商店, 關卡獎勵, 事件

## 物品怎麼設計的?

- 由設計師設計物品的模板, 包含名字, 稀有度, 詞綴等等設定
- 每個物品都是來自模板, 詞綴是固定的, 並不像 DiabloLike 那樣隨機生成

## 關於物品生成

- [TODO:] 生成來源眾多, 目前尚未完全實裝
- 先拿靜態機率表（類型、稀有度分佈）
- 動態機率會根據玩家狀態、遺物、標籤去調整
- 生成流程分層處理（漏斗機制）：
  - 篩選點: 決定類型（裝備／遺物／技能寶石）
  - 篩選點: 決定稀有度（普通／稀有／史詩／傳說）
  - 篩選點: 同稀有度下用權重抽物品
  - 篩選點: 檢查排他條件（重複、神器、堆疊上限等）
  - 篩選點: 產生最終物品
- 例子：商店刷新時，靜態分佈與玩家身上動態物品生成Weight一起算
  - 某個遺物多，該遺物機率 ++
  - 毒標籤多，毒物品權重 ++
  - MaxStack=1 已有，該物品直接排除
  - 排除表可限制任務專用、章節出現等
- 也支援直接指定 id 生成物品

## 關於物品限制表

- 我將有張靜態哈希表記錄各種限制條件
- 每次抽到物品時都要檢查:
  - 不存在於該表則無限制
  - 任務物品只能任務出現
  - 高階物品只能第三章後出現
  - 垃圾道具只會在第一章出現
  - 特定掉落物只能特定關卡出現

### POE 的物品設計思路

- 基底, 稀有度, 隨機前後綴, 插槽, 技能寶石
- 高度複雜度, 高度隨機性
- 強調無限組合與獨特性

## LOL 的物品設計思路

- 固定裝備, 固定屬性, 固定效果, 可合成
- 強調效果可預期與快速決策
