# Stash

- Stash 是玩家的倉庫, 被脫下的裝備會被放在這裡
- 有容量限制, 但可以透過擴充增加容量
- 不像玩家身上穿戴的有 load cost
- 很單純的只在乎目前放了多少物品, 最高目前默認 20 個格子

## Stash 的基本操作

- 新增, 移除, 取出物品
- 查詢目前物品列表
- 查詢目前容量使用
- 擴充容量

## Stash 暫時不用

- 排序, 分類, 因為目前開放格子非常少

## 挑戰

- 礙於 DB 存取問題, 我們不可能每筆取出放入都直接存取 DB
- 前端需要回傳不可變的 Stash 操作日誌, 當關閉背包窗才會打 API
- 要避免複製、衝突、覆寫、製造神裝、遺失裝備等問題

## 如何驗證 Stash 操作合法

- 前端不可新增物品, 只能裝備上或刪除已有物品
- 新增物品時, 只能從玩家身上脫下來的物品新增
- 刪除物品時, 只能刪除 Stash 裡已有的物品
- 購買或獲得物品, 都是透過其他 API 轉入 Stash System

## 操作日誌是什麼

- 操作日誌是一連串前端的 Stash 操作紀錄
- 包含操作類型, ID, 順序等
