# 遊戲機制大綱 - 2025/12/14

## 大致方向

### 故事背景

- 身為一名落魄貴族，你把手頭的錢都拿去買一名決鬥者，你將培養該決鬥者，在競技場挑戰強敵，賺取資源，重振家族榮耀。

### 遊戲核心概念

- 這個遊戲本質上是 RogueLite Run
- 資源下注挑戰隨機戰鬥，目標是存活到越後面越好.

### 鎖定的目標群體

- 輕度玩家、懶得操作的玩家。
- 上班摸魚、通勤無聊時間玩。
- 喜歡每次開局都不一樣的玩家。
- 喜歡改版頻繁的玩家。

### 玩家可以做什麼?

- 玩家操作極簡，符合輕度目標群（懶得操作），甚至懶得查攻略也該能玩。
- 開局: 選角色 + 其他配置
- 戰鬥外: 逛商店、賭博、管理倉庫與裝備、查看狀態
- 戰鬥前: 下注血量區間、觸發賽前變數
- 戰鬥中: 自動進行
- 戰鬥後: 勝利則選獎勵觸發事件（獲得獎勵或挑戰），然後循環回戰鬥外，否則進入戰鬥失敗處理流程
- 戰鬥失敗: 可選擇花費資源復活繼續，或是結束本次 Run 結算。

### 玩家從哪獲得爽快感?

- 農裝備、遺物、資源帶來的成長
- 賭博，看到金錢不斷增加
- 推進層數，挑戰更強敵人與更誇張的傷害數字。
- 類似 POE 的裝備改變機制導致的多樣玩法與組合

### 這個遊戲屬於

- 類單機遊戲，基本上是單機遊戲體驗，但需要後端作為權威伺服器。
- 同時 1000 人在台灣在線遊玩是可行的。需要登入才能玩。

## 戰鬥系統

### 1. 攻擊邏輯

- 僅分「普通攻擊」與「大招」兩種，無元素或物理魔法傷害規則之分。
- 普通攻擊有 cooldown（單位 tick），大招需能量條充滿後釋放，無 cooldown。
- 能量條由屬性決定獲取速度，並有自然回復。
- 傷害分為「一般傷害」與「真實傷害 True Damage」（無視任何減免）。
- 異常狀態獨立於元素，可被裝備、遺物影響。
- 閃避與減免機制自訂，簡化公式。

### 2. 戰鬥流程

- Tick-based 自動戰鬥，玩家僅戰前配置。
- 後端瞬間運算完畢，前端呈現為可控重播：
  - 可以繼續、暫停、1x~3x 變速(Replay,UI負責)。
  - 玩家與敵人依冷卻時間自動行動（附加隨機延遲）。
- 戰鬥結果於載入時即決定，過程不可干預。
- 傷害流程：BeforeDamage → HitCheck → Critical → DamageModify → Defense → BeforeApply → Apply → AfterApply。
- 支援目標選擇策略（攻擊第一位、血最少、血最多等）。
- 重點行動皆進入日誌隊列供重播。

### 3. 異常狀態與效果

- 異常狀態機制仍在構思，可能大改。
- 聖火、充能、冰緩、毒等有各自疊加與觸發規則。
- 無屬性異常如致盲、破甲、出血、褻瀆等。
- 部分裝備、遺物可改變異常狀態計算方式或效果。

### 4. 戰鬥內復活（死亡檢查）

- 血量歸零進入死亡檢查。
- 依屬性提供起死回生概率（3%~50%），復活後恢復 10%~100% 血量。
- 復活後異常狀態全部清除。

### 5. 賽前變數

- 進入戰鬥前有 1~n 個賽前變數注入階段。
- 效果通常影響雙方，例如開局皆受 16 層 Chill、復活率提升 20%、大招充能效率 ×30% 等。
- 玩家可以花錢 reroll 賽前變數。(但很貴。)

### 6. 賽前博弈（血量區間下注）

- 玩家下注勝利時剩餘血量區間：
  - 1-10%（8 倍）
  - 11-30%（4 倍）
  - 31-60%（2 倍）
  - 61-100%（1.2 倍）
- 猜中獲得對應倍率金幣，猜錯僅得基礎獎勵，沒收賭金。
- 賭金通常是玩家總資產的 %，而非固定金額。

## 角色系統

- 角色為模板，僅提供基礎數值與職業標籤，無等級。
- 職業決定專屬裝備池與部分遺物生成權重。
- 角色資訊面板顯示完整計算後屬性、裝備、遺物、大招。

## 裝備與遺物系統

### 1. 屬性分層

- 防禦：HP、護甲（%減傷）、閃避。
- 攻擊：攻擊力、攻擊冷卻、暴擊率、命中值、攻擊標籤。
- 機制：大招充能效率、復活率等。

### 2. 裝備與遺物差異

- 裝備：每類僅裝備一件（武器、頭盔、裝甲、項鍊、鞋子等），可放入倉庫或售出。
- 遺物：可無限堆疊，僅可穿戴或售出。
- 兩者皆為 Affixes 容器，無固定屬性類型。
- 裝備無升級系統，過時即淘汰。
  ㄋ

### 3. 裝備稀有度與生成

- 稀有度：普通、魔法、稀有、傳說（可擴充）。
- 生成依賴獨立物品生成系統，受職業與當前難度係數影響。

### 4. 倉庫機制

- 倉庫無數量限制。
- 倉庫內裝備不再強制變現。

## 難度係數

- 依關卡層數計算。
- 決定敵人與玩家可獲得裝備、遺物強度。
- 敵人同樣穿戴由難度係數生成的裝備與遺物。

## 關卡與進程

- 每 10 關為一章節，共 10 個遭遇節點。
- 敵人資訊完全未知，僅顯示威脅等級。
- 第 5 關為中型 Boss，第 10 關為大型 Boss。
- 路線為直線向上，每戰勝利後提供 2 條可預覽的分支路線（內含 1~3 個事件）。
- 分支獎勵高度分化。
- 超過 30 關進入無盡模式。

## 商店與賭博

- 商店常駐，每戰勝利後刷新商品。
- 功能：購買、出售、拉霸機賭博。
- 出售價格為原價打折。
- 大章節推進後，商品價格與賭博最低注額提升。

## 失敗與重試

- 戰鬥內復活失敗 → 進入 Run 失敗檢查。
- 若持有續命道具（極稀有、極昂貴或需支付當前所有金幣），回到商店不推進進度，消耗後由商店老闆 Clone 角色，保留全部裝備遺物，並獲得一次免費賭博 + 商店刷新。
- 無續命手段則本 Run 結束。
- 允許自由 save & load。

## 新的一輪遊戲流程

- 選擇角色模板（決定職業與初始裝備）。
- 進入章節，顯示 10 個未知威脅等級節點。
- 每戰前可進入商店、下注血量區間、觸發賽前變數。
- 戰鬥自動進行，重播可任意拖動與變速。
- 勝利按下注結算倍率金幣，失敗進入 Run 失敗檢查。

## 總的來說 玩家能幹嘛?

- 玩家開啟一個新遊戲、然後選職業、或者有某些其他初始配置。
- 玩家在戰鬥之外:可以去商店、去賭博
- 玩家在戰鬥之外:可以管理裝備、查看自己狀態
- 玩家在戰鬥中:啥都不能做
- 玩家在戰鬥後:會開啟兩個獎勵分支，玩家選一個分支，每個分支都有兩個事件可以觸發。
- 玩家在進入事件後:回到戰鬥外狀態
- 循環往復

## 個人偏好命名（保持可移植性）

### 正面例子

- Character、Entity、Creature、Combat、Encounter、Run、Equipment、Relic、Inventory、Shop 等。

### 反面例子（禁用）

- Gladiator、Noble、Arena 等綁定競技場詞彙。
