# Combat v0.3 æ›´æ–°èªªæ˜ï¼šç¤ºç¯„ç¯„ä¾‹èˆ‡é‹ä½œæ©Ÿåˆ¶

> **æ›´æ–°æ—¥æœŸ**: 2025-12-01  
> **æ›´æ–°å…§å®¹**: å®Œå–„ç¤ºç¯„æˆ°é¬¥ç¯„ä¾‹ + è£œå……ç³»çµ±é‹ä½œæ©Ÿåˆ¶èªªæ˜

---

## ğŸ“‹ æ›´æ–°å…§å®¹

### 1. æ›´æ–°ç¤ºç¯„æˆ°é¬¥ç¯„ä¾‹ (`combat-impl/examples/simpleCombat.ts`)

#### æ–°å¢å…§å®¹ï¼š

- âœ… **è£å‚™ç¤ºç¯„**ï¼š
  - Warrior è£å‚™ Guardian's Plateï¼ˆä½è¡€é‡è­·ç”²åŠ æˆï¼‰
  - Archer è£å‚™ Stormbladeï¼ˆå……èƒ½æ™‚æš´æ“Šç¿»å€ï¼‰

- âœ… **è–ç‰©ç¤ºç¯„**ï¼š
  - Archer è£å‚™ Poison Vial x2ï¼ˆå †ç–Šä¸­æ¯’æ•ˆæœï¼‰

- âœ… **å¤§æ‹›ç¤ºç¯„**ï¼š
  - Warrior ä½¿ç”¨ BloodPactUltimateï¼ˆçŠ§ç‰² HP å¼·åŒ–æ”»æ“Šï¼‰
  - Archer ä½¿ç”¨ ThunderStrikeUltimateï¼ˆç¾¤é«”é›·æ“Šï¼‰

#### ç¨‹å¼ç¢¼ç¯„ä¾‹ï¼š

```typescript
// å‰µå»ºæˆ°é¬¥ Context
const tempContext = new CombatContext(12345)

// Warrior é…ç½®
const warrior = new Character({
  name: 'Warrior',
  team: 'player',
  baseAttributes: createDefaultAttributes({
    /* ... */
  }),
  ultimate: new BloodPactUltimate(),
})
warrior.equipItem(new GuardiansPlate(), tempContext)

// Archer é…ç½®
const archer = new Character({
  name: 'Archer',
  team: 'player',
  baseAttributes: createDefaultAttributes({
    /* ... */
  }),
  ultimate: new ThunderStrikeUltimate(2.5),
})
archer.equipItem(new Stormblade(), tempContext)
const poisonVial = new PoisonVial()
poisonVial.addStack() // å †ç–Šåˆ° 2 å±¤
archer.addRelic(poisonVial, tempContext)
```

---

### 2. æ›´æ–°ç›¤é»å ±å‘Š (`dev_log/v0.3/combat_v0.3_ç›¤é»å ±å‘Š.md`)

æ–°å¢ **3.1 ç³»çµ±é‹ä½œæ©Ÿåˆ¶** ç« ç¯€ï¼ŒåŒ…å«ï¼š

#### 3.1.1 æ ¸å¿ƒæ¦‚å¿µï¼šè¬ç‰©çš†æ•ˆæœ

- è§£é‡‹ç‚ºä½•è£å‚™ã€è–ç‰©ã€å¤§æ‹›ã€ç•°å¸¸ç‹€æ…‹éƒ½ä»¥ `IEffect` ç‚ºåŸºç¤
- èªªæ˜çµ±ä¸€æŠ½è±¡çš„å„ªå‹¢

#### 3.1.2 å¯¦æˆ°ç¯„ä¾‹ï¼šå¤šå…ƒçµ„åˆå¦‚ä½•é‹ä½œ

- å®Œæ•´æˆ°é¬¥æµç¨‹æ¼”ç¤º
- å±•ç¤º Stormblade + Poison Vial + Thunder Strike çš„å”åŒå·¥ä½œ
- èªªæ˜ 7 éšæ®µå‚·å®³éˆä¸­çš„ Hook è§¸ç™¼æ™‚æ©Ÿ

#### 3.1.3 å¤šè®ŠåŒ–é‹ä½œæ©Ÿåˆ¶ç¯„ä¾‹

**ç¯„ä¾‹ 1ï¼šè¡€å¥‘å¤§æ‹›ï¼ˆBloodPactUltimateï¼‰**

- å±•ç¤ºã€Œè‡¨æ™‚æ•ˆæœæ³¨å…¥ã€æ©Ÿåˆ¶
- èªªæ˜æ•ˆæœè‡ªå‹•è¨ˆæ•¸èˆ‡æ¸…ç†

**ç¯„ä¾‹ 2ï¼šè–ç‰©å †ç–Šï¼ˆPoison Vialï¼‰**

- å±•ç¤ºã€Œæ•ˆæœæ•¸é‡ = å †ç–Šæ•¸é‡ã€æ©Ÿåˆ¶
- èªªæ˜å †ç–Šè®ŠåŒ–æ™‚çš„è‡ªå‹•åˆ·æ–°

**ç¯„ä¾‹ 3ï¼šè£å‚™æ¢ä»¶æ•ˆæœï¼ˆGuardian's Plateï¼‰**

- å±•ç¤ºã€Œå‹•æ…‹å±¬æ€§ä¿®æ­£ã€æ©Ÿåˆ¶
- èªªæ˜æ¢ä»¶è§¸ç™¼èˆ‡è‡ªå‹•éŸ¿æ‡‰

#### 3.1.4 ç‚ºä½•è¦é€™æ¨£é–‹ç™¼ï¼Ÿè¨­è¨ˆç†å¿µç¸½çµ

- å°æ¯” if-else æ–¹æ³• vs Hook æ–¹æ³•
- è§£é‡‹å¯æ“´å±•æ€§ã€å¯ç¶­è­·æ€§ã€å¯æ¸¬è©¦æ€§ã€å¯çµ„åˆæ€§
- å¼·èª¿**é–‹æ”¾å°é–‰åŸå‰‡**

---

## ğŸ¯ æ›´æ–°ç›®çš„

1. **é™ä½å­¸ç¿’æ›²ç·š**ï¼š
   - æ–°é–‹ç™¼è€…å¯ä»¥é€éå¯¦æˆ°ç¯„ä¾‹å¿«é€Ÿç†è§£ç³»çµ±
   - çœ‹åˆ°å®Œæ•´çš„è£å‚™ã€è–ç‰©ã€å¤§æ‹›é…ç½®æµç¨‹

2. **å±•ç¤ºè¨­è¨ˆå„ªå‹¢**ï¼š
   - é€éå¤šå€‹å¯¦éš›ç¯„ä¾‹ï¼Œå±•ç¤º Hook ç³»çµ±çš„éˆæ´»æ€§
   - èªªæ˜ç‚ºä½•é¸æ“‡é€™ç¨®æ¶æ§‹ï¼Œè€Œéç°¡å–®çš„ if-else

3. **æä¾›é–‹ç™¼æŒ‡å¼•**ï¼š
   - è®“é–‹ç™¼è€…ç†è§£ã€Œæ•ˆæœå¦‚ä½•çµ„åˆã€
   - ç†è§£ã€Œç‚ºä½•è¦é€™æ¨£è¨­è¨ˆã€

---

## ğŸ“š ç›¸é—œæª”æ¡ˆ

- `src/modules/combat-impl/examples/simpleCombat.ts` - æ›´æ–°å¾Œçš„ç¤ºç¯„æˆ°é¬¥
- `dev_log/v0.3/combat_v0.3_ç›¤é»å ±å‘Š.md` - æ›´æ–°å¾Œçš„ç›¤é»å ±å‘Š
- `src/modules/combat-impl/equipment/` - è£å‚™å¯¦ä½œç¯„ä¾‹
- `src/modules/combat-impl/relics/` - è–ç‰©å¯¦ä½œç¯„ä¾‹
- `src/modules/combat-impl/ultimates/` - å¤§æ‹›å¯¦ä½œç¯„ä¾‹

---

## âœ… é©—è­‰çµæœ

- âœ… TypeScript ç·¨è­¯ç„¡éŒ¯èª¤
- âœ… ESLint æª¢æŸ¥é€šé
- âœ… æ‰€æœ‰ import è·¯å¾‘æ­£ç¢º
- âœ… è£å‚™ã€è–ç‰©ã€å¤§æ‹›ç³»çµ±æ­£å¸¸é‹ä½œ

---

## ğŸš€ ä¸‹ä¸€æ­¥å»ºè­°

1. **åŸ·è¡Œç¤ºç¯„æˆ°é¬¥**ï¼š

   ```typescript
   import { runSimpleCombat } from '@/modules/combat-impl/examples'
   const result = runSimpleCombat()
   console.log(result)
   ```

2. **é–±è®€ç›¤é»å ±å‘Š**ï¼š
   - ç†è§£ç³»çµ±é‹ä½œæ©Ÿåˆ¶ï¼ˆ3.1 ç¯€ï¼‰
   - å­¸ç¿’é–‹ç™¼æµç¨‹ï¼ˆ3.2-3.4 ç¯€ï¼‰

3. **å¯¦è¸é–‹ç™¼**ï¼š
   - å˜—è©¦æ–°å¢ä¸€å€‹è‡ªå®šç¾©è£å‚™
   - å˜—è©¦æ–°å¢ä¸€å€‹è‡ªå®šç¾©å¤§æ‹›
   - è§€å¯Ÿæ•ˆæœå¦‚ä½•è‡ªå‹•çµ„åˆ

---

**æ›´æ–°å®Œæˆæ—¥æœŸ**: 2025-12-01  
**ç‰ˆæœ¬**: Combat v0.3  
**ç‹€æ…‹**: âœ… å®Œæˆä¸¦é©—è­‰
