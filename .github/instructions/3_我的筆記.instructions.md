# TODO

## CombatContext 不應該依賴 EventLogger

- 如果讓 CombatContext 持有 EventLogger，實際上是在走回頭路，讓 Context 再次承擔了不該有的職責。
- CombatContext 的職責是 「提供戰鬥當下的狀態 (State)」。
- EventLogger 的職責是 「記錄過去發生的歷史 (History/Output)」。
  狀態不應該依賴於輸出的機制。
- 的戰鬥邏輯（System）不應該知道「日誌」的存在。System 只需要負責「做事」和「發送事件」。
- EventLogger 應該是一個 「掛在 EventBus 旁邊的監聽者」。

## Character 與 AttributeContainer 是甚麼?

- Character 應該是一個輕量的 Entity，只負責識別與組合 Component，不包含業務邏輯。(ECS遊戲理論)
- 這是角色的屬性管理器，負責儲存與計算屬性。需要支援基礎屬性、動態屬性、屬性修飾器等功能。

## EffectManager 是甚麼?

- EffectManager 是角色的 Component,管理該角色身上的所有效果(獲取效果、移除效果、觸發效果等)。

## 何時該開發 Equipment 和 Weapon

- 武器需要 AbilitySystem 來處理攻擊冷卻和施放
- 裝備的獨特效果需要 ICombatHook 和 DamageChain 來實作
- 裝備詞綴的計算需要更完善的 AttributeCalculator
- 沒有 CombatEngine，無法跑一場完整的戰鬥來測試裝備是否有效
- 沒有具體的 Effect 實作，無法測試獨特裝備的效果

## 關於 關於裝備改變效果數值的設計

- 舉個例子: 有一個裝備叫做超級充能鞋子，他能將原本的充能效果層數上限提高6層，同時提高充能效果從默認4%冷卻減少提升到8%
- 我的想法是讓 Effect 支持外部修飾器(Modifier)的概念 裝備作為 Effect 提供者
- public applyModifier(modifier: EffectModifier)
- Effect 和 Equipment 互不依賴
- 新增裝備不需要修改 Effect 代碼
- 支持多個裝備同時修飾同一個效果
- 事件依賴: 需要完善的事件系統支持
- 缺點修飾器的應用順序可能影響結果
