services:
  redis:
    image: redis:7-alpine
    container_name: app_harpy_redis
    restart: unless-stopped
    ports:
      - "6379:6379"
    volumes:
      - redis_data:/data
    command:
      - "redis-server"
      # - "--appendonly"
      # - "yes"
    # 其他常用配置（可選）：
    # - "--maxmemory" "256mb"           # 設定記憶體上限
    # - "--maxmemory-policy" "allkeys-lru"  # 超出記憶體時的淘汰策略
    # - "--requirepass" "password"      # 設定密碼（生產環境建議）
    # - "--loglevel" "notice"           # 日誌等級
    healthcheck:
      test: ["CMD", "redis-cli", "ping"]
      interval: 5s
      timeout: 3s
      retries: 5
    networks:
      - app-network

networks:
  app-network:
    driver: bridge

volumes:
  redis_data:
    driver: local
