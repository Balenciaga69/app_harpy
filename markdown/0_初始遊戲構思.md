## 1. 核心玩法循環

- 戰前配置：玩家配置武器（或魔法書）、頭盔、裝甲、項鍊。
- 技能選擇：主要技能來自武器或魔法書，並可搭配輔助寶石（Support Gem）。
- 點擊戰鬥：點擊進入下一關 → 啟動自動戰鬥（即時制，每 10ms 運算一次）。
- 戰後獎勵：
      - 主要獎勵 (三選一)：包含裝備、消耗品、遺物、寶石等等，具體掉落類型仍在規劃中。
      - 消耗品：小怪戰鬥後穩定獲得。
- 商店互動：可於任意時刻回到商人處購買裝備、遺物、升級技能／武器。
- 遊戲進程：通關第 100 層後進入無盡模式（怪物循環生成 + 難度係數遞增）。

---

## 2. 關卡與進程設計

### 2.1 層數類型

- 一般關卡：雜兵戰鬥或提供消耗品掉落。
- 中型 Boss：出現在 5, 15, 25, ... 層。中型 Boss 戰鬥後會掉落遺物。
- 大型 Boss：出現在 10, 20, 30, ... 層。
- 正面事件：只出現在中型 Boss 關卡（可與中型 Boss 交替）。

### 2.2 敵人抽取機制

- 敵人構成：敵人不固定，從雜魚池、中型 Boss 池、大型 Boss 池中抽取。
- 難度調整：抽取後，依據層數的難度係數調整生命、攻擊、冷卻等基礎屬性。
- 出現區間：怪物可設定出場層數區間限制。

---

## 3. 戰鬥系統

### 3.1 基本規則

- 即時制：以 10ms 為時間單位進行運算和 Tick。(我們只關注Tick,而 10ms 只是模擬時間流逝用於視覺回放)
- 戰鬥控制：玩家可選擇跳過過程、三倍速、一倍速、暫停、繼續撥放。
- 自動行動：玩家與敵人依武器或法術冷卻時間自動執行行動。
- 主攻擊限制：玩家僅能擁有一個主攻擊（武器攻擊或法術）。
- 玩家干預限制：戰鬥結果在載入時即已決定。玩家無逃跑、主動道具等功能干預過程。
- 技能類型：
      - 單體型技能
      - 擴散型技能：傷害均攤給多目標，內建傷害較低。

### 3.2 傷害類型與效果

- 物理：純攻擊，傷害更依賴武器上的基礎屬性。
- 火：疊加聖火層數，提升防禦。（10, 20, 30, 40, 50 層有不同功能。最高 50 層）
- 電：造成充能（提高自身攻擊／施法頻率），默認 4% 效果，默認最高 16 層。
- 冰：延長敵方下次攻擊／施法冷卻時間，默認 4% 效果，默認最高 16 層。
- 毒：疊加 DoT（持續傷害）。1 層 1 毒傷害，無視護甲與閃避，理論上無上限。每秒減少 10% 層數或至少 1 層（數值平衡調整中）。
- 電、冰、毒都會隨著Tick時間流逝而減少層數。
- 無屬性效果:
  - 致盲: 降低命中值
  - 破甲: 部分護甲值將被暫時性減少
  - 出血: 短暫而強力的滯後性傷害(高額DoT，可能300Tick內造成大量傷害)
  - 褻瀆: 該戰局內永久性降低最大生命值

### 3.3 防禦屬性

- 生命 (HP)：通常為數千
- 護甲：通常為數千，提供百分比傷害減免 (%)。
- 閃避值：通常為數千，透過公式與敵方命中值比較，最高可達 90% 閃避率。

---

## 4. 玩家屬性構成

### 4.1 防禦屬性

- HP
- 護甲（% 減傷）
- 閃避（由數值與命中值作運算）

### 4.2 武器攻擊屬性

- 攻擊力
- 攻擊冷卻時間
- 暴擊率
- 命中值
- 攻擊標籤（物理／火／冰／雷／毒等，未來會擴充）

### 4.3 法術屬性（綁定魔法書）

- 基底傷害
- 冷卻時間
- 法術標籤（同上）

---

## 5. 裝備系統

- 機制變更註釋：已移除「小符文」系統。裝備的永久屬性增幅將被更簡單的「遺物」系統取代。

### 5.1 裝備分類

- 武器（或魔法書）
- 頭盔
- 裝甲
- 項鍊

### 5.2 稀有度

- 稀有 (Rare)：金色，無特殊效果，純粹依賴高素質取勝。較常見，由多種詞綴中隨機選 n 個拼湊而成。
- 獨特 (Unique)：橘色，提供特殊功能（可能改變核心玩法）。基礎素質較弱，詞綴固定。

### 5.3 裝備素質規則

- 以 10、 20、 30 層等等為模板階段調整基底強度。
- 稀有裝備為常態強度，獨特裝備則以功能性取代部分素質。

### 5.4 裝備升級系統

- 裝備等級：裝備有等級限制。
- 金幣強化：裝備達到 Lv 10 之後，需要消耗金幣進行強化衝裝。
- 詞綴影響：裝備強化會影響通用詞綴（如生命值、攻擊力），但獨特詞綴將保持不變。
- 成本與風險：強化消耗的金幣額與失敗率將是指數級別上升。
- 安全保障：衝裝備不會導致裝備破壞或消失，這能減少玩家中途放棄的意願。

---

## 6. 技能與 Support Gem

### 6.1 技能類型（二選一，影響整局）

1. 攻擊型：
       - 攻擊來自武器本身。
       - 完全依賴武器素質計算傷害。
       - 有暴擊判定、有命中值判定。
       - 無法被 Support Gem 輔助。
2. 法術型：
       - 必中、無暴擊判定。
       - 傷害依賴 Support Gem 的強化程度。

### 6.2 Support Gem

- 初始狀態：起始有 1 個空槽與 1 個隨機寶石。
- 插槽開放：每 10 層開放一格，共 40 層全部開放（最終為 1 技能 + 5 輔助 Gem）。
- 效果範例：
      - 增加傷害
      - 降低冷卻時間
      - 增幅某標籤（火、冰、毒等）
      - 特殊條件強化（擊中恢復、DoT 增幅

---

## 7. 商店系統

- 進入時機：可在任意戰鬥前進入。
- 商品刷新：商品每十層刷新一次。
- 可購買項目：
      - 隨機裝備
      - 輔助寶石
      - 消耗品等
      - 升級武器／法術（價格較高，用於保底難度）

---

## 8. 掉落系統

### 8.1 主要掉落（三選一）

- 來源可包含：裝備、消耗品、遺物、寶石等。

### 8.2 小怪掉落（固定類型）

- 一次性藥劑：自動觸發最佳百分比治療。

### 8.3 遺物系統（新機制）

- 特性：遺物是種簡單正面的永久效果，不占用裝備欄。
- 管理：戰鬥外隨時可以賣掉。
- 疊加：效果無上限疊加，數量越多，強度越高。

---

## 9. 死亡與重試

- 可死亡次數：總共 5 次。
- 失敗後選項：
      1. 跳過該關，不拿獎勵。
      2. 調整配置後重挑戰。

---

## 🔟 道具裝備內容範例 (獨特效果)

### 法術基礎效果

- 普通法術 - 電： 對單一敵人造成電傷，疊加一層充能。
- 普通法術 - 冰： 對單一敵人造成冰傷，疊加一層冷凍。
- 普通法術 - 火： 對單一敵人造成火傷，疊加一層聖火。
- 普通法術 - 毒： 對單一敵人疊加 n 層毒傷。

### 獨特裝備 (Unique) 效果 [會不斷補充]

- 獨特裝備 A： 每次計算後閃避值將轉換疊加至護甲，閃避歸 0。
- 獨特裝備 B： 所有物理傷害都能治療 X%。無效其他治療效果。無效次數越多，物理傷害治療越高。
- 獨特裝備 D： 受到雙倍傷害，免疫上個受到的傷害類型。且我造成的傷害除了該傷害外皆為 1。
- 獨特裝備 E (聖火自損)： 戰鬥開始獲得 50 層聖火，再也無法疊加聖火。每秒消耗 10 層聖火。當聖火 0 層時，每秒扣除 25% 生命。
- 獨特裝備 F (聖火群攻)： 每當消耗聖火，法術變為群體技能（相當於同時對 n 個敵人 100% 造成單體傷害）。
- 獨特裝備 G (火吸血)： 每當施展火法術將無法獲得聖火，但能吸血 n% 火傷害。
- 獨特裝備 H (毒上限)： 所有傷害都能疊加毒傷害層數，毒層數上限下降至 Y 層。
- 獨特武器 (特殊技能組)： 擊敗高層 Boss 機率取得，攻擊冷卻極慢。
      - 50% 發動普通物理攻擊 (解)
      - 40% 發動全範圍物理攻擊 (解)
      - 9% 發動火焰技能 (竈) 大幅提高聖火層數
      - 1% 概率發動單體必中必殺 (龍鱗、反發、成雙之流星，一次吟唱下個冷卻發動)，同時清空所有 buff 與 debuff。
- 獨特裝備 I (必中計算)： 命中值永遠以「敵人閃避 +1」來開始計算。
- 獨特裝備 J (高額護甲)： 護甲值不再具備減免 % 效果，提高 N 點護甲值。(相當於護甲減免廢了，但護甲值變超高可以作為其他堆數值用途)
- 獨特裝備 K： 施放冰緩後，同時冰緩自身同等層數。每層冰緩使自身提高 4% 冰傷害。
- 獨特裝備 L： 身上有至少 16 層冰緩效果時，冰傷害無視敵方護甲。
- 獨特裝備 M： 藥劑有 N % 機率不消耗
