# Question List - 完整問題索引

> 本資料夾包含 `shit.md` 的完整拆分與組織  
> 目標：提高可讀性，按主題按部就班理解系統問題

---

## 📋 文件導航

### 0. 快速入門

- **[01\_核心系統概述.md](01_核心系統概述.md)** ⭐ 從這裡開始
  - 背景說明
  - 分析重點
  - 快速導航與優先級

---

### 1. 核心系統問題（必讀）

#### [02\_詞綴系統問題.md](02_詞綴系統問題.md) 🔴 高優先級

- 層次結構與轉換邏輯的模糊性
- Affix 系統「純粹性」的污染
- 詞綴與狀態系統的邊界模糊
- 生成系統與池表的耦合
- 角色與敵人作為 Unit 的不一致性

**需要決定的事項：**

- ✅ 詞綴是靜態預綁定還是動態？
- ✅ 敵人模板如何支持動態 Affix？

#### [03\_狀態與屬性聚合.md](03_狀態與屬性聚合.md) 🔴 高優先級

- **Combat Tick 流程的致命漏洞**
  - 屬性快照時間點不明確
  - 極端案例導致不確定性
- 屬性聚合與狀態影響的快照規則
- Affix/Status/Modifier 的三者邊界
- Status 作為「另一種 Modifier」的統一設計

**需要決定的事項：**

- ✅ Snapshot Stats 還是即時聚合？
- ✅ 統一的 Modifier 解析管道

#### [04\_戰鬥系統與事件.md](04_戰鬥系統與事件.md) 🔴 高優先級

- **事件系統抽象與一致性嚴重不足**
  - 事件結構、生命週期、註冊機制未定義
  - 優先級、攔截、取消等機制缺失
- 戰鬥系統與 Affix 觸發的整合空白
- Enemy / Boss / Endless 的模式混亂

**需要決定的事項：**

- ✅ 事件系統架構
- ✅ Tick 內事件觸發的完整流程

---

### 2. 生成與運營系統（重要）

#### [05\_生成與池表系統.md](05_生成與池表系統.md) 🟡 中優先級

- 生成系統與池表的耦合與動態調整
- 難度係數與生成的整合模糊
- 動態權重的結構缺口

**需要決定的事項：**

- ✅ 權重修飾的 JSON 結構
- ✅ 池表的分層策略

---

### 3. 架構設計（深層問題）

#### [06\_架構設計缺陷.md](06_架構設計缺陷.md) 🟡 中優先級

- 解耦原則的實作風險與測試性
- **Context 膨脹與耦合風險**
- 資料持久化與序列化規則不明確
- ACL（防腐層）與跨模組協作規則未明確

**需要決定的事項：**

- ✅ Context 分層策略
- ✅ 依賴注入與接口設計
- ✅ ACL 邊界定義

---

### 4. 設計缺陷詳解

#### [07\_設計矛盾與衝突.md](07_設計矛盾與衝突.md) ⚠️ 6 個明顯矛盾

- 詞綴系統的靜態/動態矛盾 (2 個)
- 屬性系統的元素隔離問題
- 敵人模板的靜態/動態矛盾
- 賽前變數的靜態注入問題
- 交易系統的責任邊界 (過時)

**標記：** **(過時)** 或 **(設計矛盾)**

#### [08\_權衡利弊分析.md](08_權衡利弊分析.md) 📊 5 個重要權衡

- 詞綴系統的設計權衡（簡單性 vs 隨機性）
- 戰鬥系統的性能 vs 確定性
- 數值溢出的處理
- 物品欄限制的系統負載
- 交易原子性的責任

#### [09\_不完備與缺口.md](09_不完備與缺口.md) 🔍 7 個主要缺口

- 異常狀態系統的細節缺口
- 異常狀態機制仍在構思 (過時)
- Minion 系統的缺口
- 權重修飾的結構缺口
- 獎勵系統的生成邏輯缺口
- Ultimate Gem 系統的平衡缺口
- 核心遺漏：系統間資料流

#### [10\_潛在錯誤風險.md](10_潛在錯誤風險.md) 🚨 6 個高風險問題

- **模板驗證的缺失** 🔴 高
- **同 Tick 內事件順序的隨機性** 🔴 高
- 多設備登入的代幣不同步
- 物品分類擴展的兼容性問題
- 多設備同步的 UI 不同步錯誤
- **屬性聚合的多來源計算不一致** 🔴 高

---

### 5. 解決方案參考

#### [11\_業界最佳實踐參考.md](11_業界最佳實踐參考.md) ✅ 12 種模式

1. 事件系統 / 事件驅動架構
2. 屬性聚合與快照
3. 資料驅動設計
4. 組件化設計
5. 策略模式與插件架構
6. 防腐層與限界上下文
7. 資料一致性與分散式鎖
8. 事件溯源與重播
9. 測試性與可觀測性
10. 資料版本管理與升級
11. 遊戲平衡與數值驗證
12. 資料本地化與國際化

---

## 🎯 快速查詢表

### 按優先級查找

#### 🔴 必須立即解決（開發阻塞）

1. [02\_詞綴系統問題.md](02_詞綴系統問題.md) - 詞綴設計矛盾
2. [03\_狀態與屬性聚合.md](03_狀態與屬性聚合.md) - 屬性快照規則
3. [04\_戰鬥系統與事件.md](04_戰鬥系統與事件.md) - 事件系統設計
4. [10\_潛在錯誤風險.md](10_潛在錯誤風險.md) - 致命 bug 風險

#### 🟡 需要明確定義（限制擴展）

1. [05\_生成與池表系統.md](05_生成與池表系統.md)
2. [06\_架構設計缺陷.md](06_架構設計缺陷.md)
3. [09\_不完備與缺口.md](09_不完備與缺口.md)

#### 📊 設計評審清單

1. [07\_設計矛盾與衝突.md](07_設計矛盾與衝突.md) - 6 個矛盾需確認
2. [08\_權衡利弊分析.md](08_權衡利弊分析.md) - 5 個權衡需評估

---

### 按問題領域查找

| 領域         | 主要文件 | 狀態          |
| ------------ | -------- | ------------- |
| **詞綴系統** | 02       | 🔴 需設計評審 |
| **戰鬥系統** | 03, 04   | 🔴 需規則明確 |
| **生成系統** | 05       | 🟡 需結構定義 |
| **架構設計** | 06       | 🟡 需層次規劃 |
| **設計驗證** | 07, 08   | ⚠️ 需檢查清單 |
| **實現細節** | 09, 10   | 🔍 需補完     |
| **解決方案** | 11       | ✅ 可參考應用 |

---

### 按模組查找

- **Affix（詞綴）**：02, 05, 07
- **Status（狀態）**：03, 09
- **Combat（戰鬥）**：03, 04, 10
- **Event（事件）**：04, 11
- **Generation（生成）**：05, 09
- **Architecture（架構）**：06, 11
- **Persistence（持久化）**：06, 11
- **Multiplayer（多設備）**：06, 10

---

## 📈 推薦閱讀順序

### 第一天（全局理解）

1. 🟢 [01\_核心系統概述.md](01_核心系統概述.md) - 5 分鐘
2. 🔴 [02\_詞綴系統問題.md](02_詞綴系統問題.md) - 15 分鐘
3. 🔴 [03\_狀態與屬性聚合.md](03_狀態與屬性聚合.md) - 20 分鐘
4. 🔴 [04\_戰鬥系統與事件.md](04_戰鬥系統與事件.md) - 20 分鐘

### 第二天（深化理解）

5. 🟡 [05\_生成與池表系統.md](05_生成與池表系統.md) - 15 分鐘
6. 🟡 [06\_架構設計缺陷.md](06_架構設計缺陷.md) - 20 分鐘
7. 📊 [07\_設計矛盾與衝突.md](07_設計矛盾與衝突.md) - 10 分鐘
8. 📊 [08\_權衡利弊分析.md](08_權衡利弊分析.md) - 15 分鐘

### 第三天（風險評估與方案）

9. 🔍 [09\_不完備與缺口.md](09_不完備與缺口.md) - 15 分鐘
10. 🚨 [10\_潛在錯誤風險.md](10_潛在錯誤風險.md) - 20 分鐘
11. ✅ [11\_業界最佳實踐參考.md](11_業界最佳實踐參考.md) - 30 分鐘（速覽）

---

## 💡 使用建議

### 作為開發者

1. 先讀 01-04（了解核心問題）
2. 根據負責模組讀對應的文件
3. 查詢 11（找參考實作方案）

### 作為架構師

1. 完整讀過 01-11
2. 重點關注 07（矛盾），08（權衡），06（架構）
3. 使用 11 規劃技術方案

### 作為測試/QA

1. 重點讀 10（潛在錯誤風險）
2. 參考 08（權衡）理解設計權衡
3. 用 09（缺口）檢查實現覆蓋度

### 作為運營/企劃

1. 重點讀 05（生成系統）
2. 參考 08（權衡）理解設計限制
3. 看 11（實踐）中的「資料驅動設計」

---

## 🏷️ 標記說明

在各文件中你會看到這些標記：

| 標記       | 含義                | 示例             |
| ---------- | ------------------- | ---------------- |
| 🔴         | 高優先級 / 開發阻塞 | 必須立即解決     |
| 🟡         | 中優先級 / 需要明確 | 限制擴展但不阻塞 |
| ⚠️         | 需要注意 / 風險項   | 容易踩坑         |
| 🔍         | 細節缺口            | 實現時需補充     |
| 🚨         | 高風險問題          | 可能導致 bug     |
| ✅         | 推薦方案 / 參考     | 業界最佳實踐     |
| (過時)     | 信息已過時          | 需要重新審視     |
| (重複)     | 內容重複            | 在其他地方也提到 |
| (設計矛盾) | 與其他地方衝突      | 需要設計評審     |

---

## 📊 統計

- **總文件數**：11 個
- **總字數**：約 35,000 字
- **高優先級問題**：4 個
- **中優先級問題**：8 個
- **設計矛盾**：6 個
- **潛在 bug 風險**：6 個
- **參考最佳實踐**：12 個

---

## 🔗 與原始文件的對應

本索引完全來自 `shit.md` 的重構與組織

如需查看原始完整分析，請參考：
`c:\Users\wits\Desktop\GitRepo\app_harpy\packages\game-core\shit.md`

---

## ✍️ 維護說明

每個文件都可以獨立更新。建議：

- 🔄 當決策確認時，在對應文件中標記為「已決策」
- 📋 當實現完成時，在對應文件中添加「實現進度」
- 🔗 當相關文件變動時，更新本索引的對應連結
